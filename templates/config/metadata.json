{
  "title": "{{ context.name }} Civic Data",
  "description_html": "A fully-searchable database of {{ context.name }}, {{ context.state }} civic meeting minutes and agendas. Last processed: {{ context.last_updated }}. See the full list at <a href=\"https://civic.band\">Civic Band</a>.",
  "about_url": "https://civic.band/",
  "name": "{{ context.name }}",
  "plugins": {
    "corkboard": {
      "subdomain": "{{ context.subdomain }}",
      "site_title": "{{ context.name }} Civic Data",
      "site_name": "{{ context.name }}",
      "site_description_html": "A fully-searchable database of {{ context.name }}, {{ context.state }} civic meeting minutes and agendas. Last processed: {{ context.last_updated }}. See the full list at <a href=\"https://civic.band\">Civic Band</a>."
    },
    "datasette-updated": {
      "updated": "{{ context.last_updated }}",
      "time_type": "date"
    },
    "datasette-dashboards": {
      "meetings-stats": {
        "title": "{{ context.name }} Meeting Statistics",
        "settings": {
          "allow_fullscreen": true,
          "autorefresh": 5
        },
        "layout": [
          [
            "agendas-count-table",
            "agendas-meeting-count",
            "agendas-meetings-by-meeting",
            "agendas-meetings-by-year"
          ],
          [
            "agendas-count-table",
            "agendas-page-count",
            "agendas-pages-by-meeting",
            "agendas-pages-by-year"
          ],
          [
            "minutes-count-table",
            "minutes-meeting-count",
            "minutes-meetings-by-meeting",
            "minutes-meetings-by-year"
          ],
          [
            "minutes-count-table",
            "minutes-page-count",
            "minutes-pages-by-meeting",
            "minutes-pages-by-year"
          ]
        ],
        "charts": {
          "agendas-count-table": {
            "title": "Pages of agendas by meeting type (Top 40)",
            "db": "meetings",
            "query": "select '<a href=\"/meetings?sql=select%0D%0A++*%0D%0Afrom%0D%0A++agendas%0D%0Awhere%0D%0A++meeting+%3D+%27'||meeting||'%27%0D%0Aorder+by%0D%0A++date+desc%2C%0D%0A++page+ASC\">' || substr(meeting, 1, 42) || '</a>' as meeting, count(*) as page_count from agendas group by meeting order by page_count DESC limit 40",
            "library": "table",
            "display": ""
          },
          "agendas-meeting-count": {
            "title": "Number of meetings with agendas",
            "db": "meetings",
            "query": "select count(distinct date) as meeting_count from agendas",
            "library": "metric",
            "display": {
              "field": "meeting_count",
              "prefix": null,
              "suffix": " meetings"
            }
          },
          "agendas-meetings-by-meeting": {
            "title": "Meetings with agendas by meeting type",
            "db": "meetings",
            "query": "select meeting, count(distinct date) as meeting_count from agendas group by meeting order by meeting_count DESC",
            "library": "vega-lite",
            "display": {
              "mark": {
                "type": "arc",
                "tooltip": true
              },
              "params": [
                {
                  "name": "highlight",
                  "select": {
                    "fields": ["meeting"],
                    "type": "point",
                    "on": "mouseover"
                  },
                  "bind": "legend"
                }
              ],
              "encoding": {
                "color": {
                  "field": "meeting",
                  "type": "nominal"
                },
                "theta": {
                  "field": "meeting_count",
                  "type": "quantitative"
                },
                "opacity": {
                  "condition": {
                    "param": "highlight",
                    "value": 1
                  },
                  "value": 0.2
                }
              }
            }
          },
          "agendas-meetings-by-year": {
            "title": "Meetings with agendas per year by meeting type",
            "db": "meetings",
            "query": "select count(distinct date) as meeting_count, meeting, strftime(\"%Y\", date) as year from agendas group by strftime(\"%Y\", date), meeting order by year",
            "library": "vega-lite",
            "display": {
              "mark": {
                "type": "bar",
                "tooltip": true
              },
              "params": [
                {
                  "name": "highlight",
                  "select": {
                    "fields": ["meeting"],
                    "type": "point",
                    "on": "mouseover"
                  },
                  "bind": "legend"
                }
              ],
              "encoding": {
                "x": {
                  "field": "year",
                  "type": "ordinal",
                  "timeUnit": "year"
                },
                "y": {
                  "field": "meeting_count",
                  "type": "quantitative"
                },
                "color": {
                  "field": "meeting",
                  "type": "nominal"
                },
                "opacity": {
                  "condition": {
                    "param": "highlight",
                    "value": 1
                  },
                  "value": 0.2
                }
              }
            }
          },
          "agendas-page-count": {
            "title": "Total pages of agendas tracked",
            "db": "meetings",
            "query": "select count(*) as page_count from agendas",
            "library": "metric",
            "display": {
              "field": "page_count",
              "prefix": null,
              "suffix": " pages"
            }
          },
          "agendas-pages-by-meeting": {
            "title": "Agenda pages by meeting type",
            "db": "meetings",
            "query": "select meeting, count(*) as meeting_count from agendas group by meeting order by meeting_count DESC",
            "library": "vega-lite",
            "display": {
              "mark": {
                "type": "arc",
                "tooltip": true
              },
              "params": [
                {
                  "name": "highlight",
                  "select": {
                    "fields": ["meeting"],
                    "type": "point",
                    "on": "mouseover"
                  },
                  "bind": "legend"
                }
              ],
              "encoding": {
                "color": {
                  "field": "meeting",
                  "type": "nominal"
                },
                "theta": {
                  "field": "meeting_count",
                  "type": "quantitative"
                },
                "opacity": {
                  "condition": {
                    "param": "highlight",
                    "value": 1
                  },
                  "value": 0.2
                }
              }
            }
          },
          "agendas-pages-by-year": {
            "title": "Agenda pages per year by meeting type",
            "db": "meetings",
            "query": "select count(*) as meeting_count, meeting, strftime(\"%Y\", date) as year from agendas group by strftime(\"%Y\", date), meeting order by year",
            "library": "vega-lite",
            "display": {
              "mark": {
                "type": "bar",
                "tooltip": true
              },
              "params": [
                {
                  "name": "highlight",
                  "select": {
                    "fields": ["meeting"],
                    "type": "point",
                    "on": "mouseover"
                  },
                  "bind": "legend"
                }
              ],
              "encoding": {
                "x": {
                  "field": "year",
                  "type": "ordinal",
                  "timeUnit": "year"
                },
                "y": {
                  "field": "meeting_count",
                  "type": "quantitative"
                },
                "color": {
                  "field": "meeting",
                  "type": "nominal"
                },
                "opacity": {
                  "condition": {
                    "param": "highlight",
                    "value": 1
                  },
                  "value": 0.2
                }
              }
            }
          },
          "minutes-count-table": {
            "title": "Pages of minutes by meeting type (Top 40)",
            "db": "meetings",
            "query": "select '<a href=\"/meetings?sql=select%0D%0A++*%0D%0Afrom%0D%0A++minutes%0D%0Awhere%0D%0A++meeting+%3D+%27'||meeting||'%27%0D%0Aorder+by%0D%0A++date+desc%2C%0D%0A++page+ASC\">' || substr(meeting, 1, 42) || '</a>' as meeting, count(*) as page_count from minutes group by meeting order by page_count DESC limit 40",
            "library": "table",
            "display": ""
          },
          "minutes-meeting-count": {
            "title": "Number of meetings with minutes",
            "db": "meetings",
            "query": "select count(distinct date) as meeting_count from minutes",
            "library": "metric",
            "display": {
              "field": "meeting_count",
              "prefix": null,
              "suffix": " meetings"
            }
          },
          "minutes-meetings-by-meeting": {
            "title": "Meeting with minutes by meeting type",
            "db": "meetings",
            "query": "select meeting, count(distinct date) as meeting_count from minutes group by meeting order by meeting_count DESC",
            "library": "vega-lite",
            "display": {
              "mark": {
                "type": "arc",
                "tooltip": true
              },
              "params": [
                {
                  "name": "highlight",
                  "select": {
                    "fields": ["meeting"],
                    "type": "point",
                    "on": "mouseover"
                  },
                  "bind": "legend"
                }
              ],
              "encoding": {
                "color": {
                  "field": "meeting",
                  "type": "nominal"
                },
                "theta": {
                  "field": "meeting_count",
                  "type": "quantitative"
                },
                "opacity": {
                  "condition": {
                    "param": "highlight",
                    "value": 1
                  },
                  "value": 0.2
                }
              }
            }
          },
          "minutes-meetings-by-year": {
            "title": "Meetings with minutes per year by meeting type",
            "db": "meetings",
            "query": "select count(distinct date) as meeting_count, meeting, strftime(\"%Y\", date) as year from minutes group by strftime(\"%Y\", date), meeting order by year",
            "library": "vega-lite",
            "display": {
              "mark": {
                "type": "bar",
                "tooltip": true
              },
              "params": [
                {
                  "name": "highlight",
                  "select": {
                    "fields": ["meeting"],
                    "type": "point",
                    "on": "mouseover"
                  },
                  "bind": "legend"
                }
              ],
              "encoding": {
                "x": {
                  "field": "year",
                  "type": "ordinal",
                  "timeUnit": "year"
                },
                "y": {
                  "field": "meeting_count",
                  "type": "quantitative"
                },
                "color": {
                  "field": "meeting",
                  "type": "nominal"
                },
                "opacity": {
                  "condition": {
                    "param": "highlight",
                    "value": 1
                  },
                  "value": 0.2
                }
              }
            }
          },
          "minutes-page-count": {
            "title": "Total pages of minutes tracked",
            "db": "meetings",
            "query": "select count(*) as page_count from minutes",
            "library": "metric",
            "display": {
              "field": "page_count",
              "prefix": null,
              "suffix": " pages"
            }
          },
          "minutes-pages-by-meeting": {
            "title": "Minutes pages by meeting type",
            "db": "meetings",
            "query": "select meeting, count(*) as meeting_count from minutes group by meeting order by meeting_count DESC",
            "library": "vega-lite",
            "display": {
              "mark": {
                "type": "arc",
                "tooltip": true
              },
              "params": [
                {
                  "name": "highlight",
                  "select": {
                    "fields": ["meeting"],
                    "type": "point",
                    "on": "mouseover"
                  },
                  "bind": "legend"
                }
              ],
              "encoding": {
                "color": {
                  "field": "meeting",
                  "type": "nominal"
                },
                "theta": {
                  "field": "meeting_count",
                  "type": "quantitative"
                },
                "opacity": {
                  "condition": {
                    "param": "highlight",
                    "value": 1
                  },
                  "value": 0.2
                }
              }
            }
          },
          "minutes-pages-by-year": {
            "title": "Minutes pages per year by meeting type",
            "db": "meetings",
            "query": "select count(*) as meeting_count, meeting, strftime(\"%Y\", date) as year from minutes group by strftime(\"%Y\", date), meeting order by year",
            "library": "vega-lite",
            "display": {
              "mark": {
                "type": "bar",
                "tooltip": true
              },
              "params": [
                {
                  "name": "highlight",
                  "select": {
                    "fields": ["meeting"],
                    "type": "point",
                    "on": "mouseover"
                  },
                  "bind": "legend"
                }
              ],
              "encoding": {
                "x": {
                  "field": "year",
                  "type": "ordinal",
                  "timeUnit": "year"
                },
                "y": {
                  "field": "meeting_count",
                  "type": "quantitative"
                },
                "color": {
                  "field": "meeting",
                  "type": "nominal"
                },
                "opacity": {
                  "condition": {
                    "param": "highlight",
                    "value": 1
                  },
                  "value": 0.2
                }
              }
            }
          }
        }
      }
    }
  },
  "databases": {
    "meetings": {
      "queries": {
        "upcoming": {
          "sql": "select meeting, date, count(page) as pages from agendas where date >= current_date group by date, meeting order by date, meeting desc",
          "title": "Upcoming agendas",
          "hide_sql": true
        }
      },
      "tables": {
        "agendas": {
          "sort_desc": "date",
          "sort_asc": "page",
          "facets": ["meeting"]
        },
        "agendas_fts": {
          "hidden": true
        },
        "minutes_fts": {
          "hidden": true
        },
        "minutes": {
          "sort_desc": "date",
          "sort_asc": "page",
          "facets": ["meeting"]
        }
      }
    },
    "election_finance": {
      "tables": {
        "monetary_contributions": {
          "description": "FPPC Form 460, Schedule A",
          "source": "A_Contributions",
          "source_url": "/election_finance/A_Contributions",
          "sort_desc": "report_date"
        },
        "non_monetary_contributions": {
          "description": "FPPC Form 460, Schedule C",
          "source": "C_Contributions",
          "source_url": "/election_finance/C_Contributions",
          "sort_desc": "report_date"
        },
        "misc_cash_increases": {
          "description": "FPPC Form 460, Schedule I",
          "source": "I_Contributions",
          "source_url": "/election_finance/I_Contributions",
          "sort_desc": "report_date"
        },
        "ie_contributions": {
          "description": "FPPC Form 496, Part 3 Contributions",
          "source": "F496P3_Contributions",
          "source_url": "/election_finance/F496P3_Contributions",
          "sort_desc": "report_date"
        },
        "ie_expenditures": {
          "description": "FPPC Form 465, Part 3 Expenditure",
          "source": "F465P3_Expenditures",
          "source_url": "/election_finance/F465P3_Expenditures",
          "sort_desc": "report_date"
        },
        "major_donor_ie_statements": {
          "description": "FPPC Form 461, Part 5 Expenditure",
          "source": "F461P5_Expenditures",
          "source_url": "/election_finance/F461P5_Expenditures",
          "sort_desc": "report_date"
        },
        "expenditure_summaries": {
          "description": "FPPC Form 460, Schedule D",
          "source": "D_Expenditure",
          "source_url": "/election_finance/D_Expenditure",
          "sort_desc": "report_date"
        },
        "on_behalf_of_expenditures": {
          "description": "FPPC Form 460, Schedule G",
          "source": "G_Expenditure",
          "source_url": "/election_finance/G_Expenditure",
          "sort_desc": "report_date"
        },
        "payments_made": {
          "description": "",
          "sort_desc": "report_date"
        },
        "accrued_expenses": {
          "description": "FPPC Form 460, Schedule F",
          "source": "F_Expenses",
          "source_url": "/election_finance/F_Expenses",
          "sort_desc": "report_date"
        },
        "received_loans": {
          "description": "FPPC Form 460, Schedule B Part 1",
          "source": "B1_Loans",
          "source_url": "/election_finance/B1_Loans",
          "sort_desc": "report_date"
        },
        "loan_guarantors": {
          "description": "FPPC Form 460, Schedule B Part 2",
          "source": "B2_Loans",
          "source_url": "/election_finance/B2_Loans",
          "sort_desc": "report_date"
        },
        "loans_made": {
          "description": "FPPC Form 460, Schedule H",
          "source": "H_Loans",
          "source_url": "/election_finance/H_Loans",
          "sort_desc": "report_date"
        },
        "summaries": {
          "description": "Summary, FPPC Form 460, Summary Page",
          "source": "Summary",
          "source_url": "/election_finance/Summary",
          "sort_desc": "report_date"
        },
        "contribution_reports_24_hours": {
          "description": "FPPC Form 497",
          "source": "497",
          "source_url": "/election_finance/497",
          "sort_desc": "report_date"
        },
        "ie_reports_24_hours": {
          "description": "FPPC Form 496",
          "source": "496",
          "source_url": "/election_finance/496",
          "sort_desc": "report_date"
        },
        "zipcodes": {
          "description": "Zip code to city mapping",
          "source": "simplemaps",
          "source_url": "https://simplemaps.com/data/us-zips"
        },
        "496": {
          "hidden": true
        },
        "497": {
          "hidden": true
        },
        "A_Contributions": {
          "hidden": true
        },
        "B1_Loans": {
          "hidden": true
        },
        "B2_Loans": {
          "hidden": true
        },
        "C_Contributions": {
          "hidden": true
        },
        "D_Expenditure": {
          "hidden": true
        },
        "E_Expenditure": {
          "hidden": true
        },
        "F_Expenses": {
          "hidden": true
        },
        "F461P5_Expenditure": {
          "hidden": true
        },
        "F465P3_Expenditure": {
          "hidden": true
        },
        "F496P3_Contributions": {
          "hidden": true
        },
        "G_Expenditure": {
          "hidden": true
        },
        "H_Loans": {
          "hidden": true
        },
        "I_Contributions": {
          "hidden": true
        },
        "Summary": {
          "hidden": true
        }
      }
    }
  }
}
