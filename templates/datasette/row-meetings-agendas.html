{% extends "default:row.html" %}

{% block extra_head %}
<!-- Dublin Core metadata for citation tools -->
<meta name="DC.title" content="{{ rows[0].meeting }} {{ table|title }}, {{ rows[0].date }}">
<meta name="DC.creator" content="{{ site_name }}">
<meta name="DC.publisher" content="CivicBand Archive">
<meta name="DC.date" content="{{ rows[0].date }}">
<meta name="DC.type" content="Text">
<meta name="DC.format" content="text/html">
<meta name="DC.identifier" content="https://{{ subdomain }}.civic.band{{ request.path }}">
<meta name="DC.source" content="{{ site_name }}">
<meta name="DC.language" content="en">
{% endblock %}

{% block content %}
<h1 style="padding-left: 10px; border-left: 10px solid #{{ database_color }}">
    {{ table }}: {{ ', '.join(primary_key_values) }}{% if private %} ðŸ”’{% endif %}
</h1>

{% if rows and rows[0].page %}
<p style="margin: 0.5rem 0;">
    <a href="/{{ database }}/{{ table }}?meeting__exact={{ rows[0].meeting|urlencode }}&date__exact={{ rows[0].date|urlencode }}&page__gte={{ [rows[0].page - 2, 1]|max }}&page__lte={{ rows[0].page + 2 }}&_sort=page" data-umami-event="row_context" data-umami-event-table="agendas">View surrounding pages (pages {{ [rows[0].page - 2, 1]|max }}â€“{{ rows[0].page + 2 }})</a>
</p>
{% endif %}

{% set action_links, action_title = row_actions, "Row actions" %}
{% include "_action_menu.html" %}

{{ top_row() }}

{% block description_source_license %}{% include "_description_source_license.html" %}{% endblock %}

<p>This data as {% for name, url in renderers.items() %}<a href="{{ url }}">{{ name }}</a>{{ ", " if not loop.last }}{% endfor %}</p>

{% include custom_table_templates %}

{% if foreign_key_tables %}
    <h2>Links from other tables</h2>
    <ul>
        {% for other in foreign_key_tables %}
            <li>
                <a href="{{ other.link }}">
                    {{ "{:,}".format(other.count) }} row{% if other.count == 1 %}{% else %}s{% endif %}</a>
                from {{ other.other_column }} in {{ other.other_table }}
            </li>
        {% endfor %}
    </ul>
{% endif %}
{% endblock %}
